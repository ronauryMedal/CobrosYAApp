<ion-content [fullscreen]="true" class="forgot-password-content">
  <!-- Status Bar -->
  <div class="status-bar">
    <span class="time">9:41</span>
    <div class="status-icons">
      <ion-icon name="cellular-outline"></ion-icon>
      <ion-icon name="wifi-outline"></ion-icon>
      <ion-icon name="battery-full-outline"></ion-icon>
    </div>
  </div>

  <!-- Header Section -->
  <div class="header-section">
    <!-- Logo -->
    <div class="logo-container">
      <img [src]="getLogoPath()" alt="PagosYA" class="logo-image">
    </div>
    
    <div class="greeting">
      <h1>¿Olvidaste tu</h1>
      <h2>contraseña?</h2>
    </div>
    <p class="instruction">No te preocupes, te ayudamos a recuperarla</p>
  </div>

  <!-- Content Section -->
  <div class="content-section">
    <!-- Back Button -->
    <div class="back-button-container">
      <ion-button fill="clear" (click)="goBack()" class="back-button">
        <ion-icon name="arrow-back" slot="start"></ion-icon>
        Volver al Login
      </ion-button>
    </div>

    <!-- Forgot Password Form -->
    <form [formGroup]="forgotPasswordForm" (ngSubmit)="submitForgotPassword()" class="forgot-password-form">
      
      <!-- Method Toggle -->
      <div class="method-toggle">
        <div class="toggle-container">
          <button 
            type="button" 
            class="toggle-option" 
            [class.active]="selectedMethod === 'email'"
            (click)="selectMethod('email')">
            <ion-icon name="mail-outline"></ion-icon>
            Email
          </button>
          <button 
            type="button" 
            class="toggle-option" 
            [class.active]="selectedMethod === 'cedula'"
            (click)="selectMethod('cedula')">
            <ion-icon name="card-outline"></ion-icon>
            Cédula
          </button>
        </div>
      </div>

      <!-- Email Input (when email is selected) -->
      <div class="input-group" *ngIf="selectedMethod === 'email'">
        <label>Correo Electrónico</label>
        <ion-input 
          formControlName="email" 
          type="email" 
          placeholder="tu@email.com"
          class="form-input">
        </ion-input>
        <div class="input-hint">
          <ion-icon name="information-circle-outline"></ion-icon>
          <span>Te enviaremos la nueva contraseña a este email</span>
        </div>
      </div>

      <!-- Cedula Input (when cedula is selected) -->
      <div class="input-group" *ngIf="selectedMethod === 'cedula'">
        <label>Cédula o Pasaporte</label>
        <ion-input 
          formControlName="cedula" 
          type="text" 
          placeholder="000-0000000-0"
          maxlength="13"
          (ionInput)="formatearCedula($event)"
          class="form-input">
        </ion-input>
        <div class="input-hint">
          <ion-icon name="information-circle-outline"></ion-icon>
          <span>Te enviaremos la nueva contraseña al email registrado</span>
        </div>
      </div>

      <!-- Submit Button -->
      <ion-button 
        expand="block" 
        type="submit" 
        [disabled]="!forgotPasswordForm.valid || isLoading"
        class="submit-button">
        <ion-spinner name="crescent" *ngIf="isLoading"></ion-spinner>
        <span *ngIf="!isLoading">Enviar Nueva Contraseña</span>
      </ion-button>

      <!-- Success Message -->
      <div class="success-message" *ngIf="successMessage">
        <ion-icon name="checkmark-circle"></ion-icon>
        <div class="message-content">
          <h3>¡Contraseña enviada!</h3>
          <p>{{ successMessage }}</p>
          <div class="temporary-password" *ngIf="temporaryPassword">
            <strong>Contraseña temporal: {{ temporaryPassword }}</strong>
          </div>
        </div>
      </div>

      <!-- Error Message -->
      <div class="error-message" *ngIf="errorMessage">
        <ion-icon name="alert-circle"></ion-icon>
        <span>{{ errorMessage }}</span>
      </div>
    </form>

    <!-- Help Text -->
    <div class="help-text">
      <p>Si no recibes el email en unos minutos, revisa tu carpeta de spam o contacta al administrador.</p>
    </div>
  </div>
</ion-content>