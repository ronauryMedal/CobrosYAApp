<ion-content [fullscreen]="true" class="login-content">
  <!-- Status Bar -->
  <div class="status-bar">
    <span class="time">9:41</span>
    <div class="status-icons">
      <ion-icon name="cellular-outline"></ion-icon>
      <ion-icon name="wifi-outline"></ion-icon>
      <ion-icon name="battery-full-outline"></ion-icon>
    </div>
  </div>

  <!-- Header Section -->
  <div class="header-section">
    <!-- Logo -->
    <div class="logo-container">
      <img [src]="getLogoPath()" alt="PagosYA" class="logo-image">
    </div>
    
    <div class="greeting">
      <h1>Hola</h1>
      <h2>otra vez</h2>
    </div>
    <p class="instruction">Accede para continuar</p>
  </div>

  <!-- Content Section -->
  <div class="content-section">


    <!-- Login Form -->
    <form [formGroup]="loginForm" (ngSubmit)="login()" class="login-form">
      <!-- Cédula Input -->
      <div class="input-group">
        <label>Cedula o Pasaporte</label>
        <ion-input 
          formControlName="cedula" 
          type="text" 
          placeholder="000-0000000-0"
          maxlength="13"
          (ionInput)="formatearCedula($event)"
          class="form-input">
        </ion-input>
      </div>

      <!-- Password Input -->
      <div class="input-group">
        <label>Contraseña</label>
        <div class="password-input-container">
          <ion-input 
            formControlName="password" 
            [type]="mostrarPassword ? 'text' : 'password'" 
            placeholder="Ingresa tu contraseña"
            autocomplete="current-password"
            class="form-input">
          </ion-input>
          <ion-button 
            fill="clear" 
            (click)="togglePassword()"
            class="password-toggle">
            <ion-icon [name]="mostrarPassword ? 'eye-off' : 'eye'"></ion-icon>
          </ion-button>
        </div>
      </div>

      <!-- Options Row -->
      <div class="options-row">
        <div class="checkbox-group">
          <ion-checkbox formControlName="recordar"></ion-checkbox>
          <label>Recuerdame</label>
        </div>
        <ion-button fill="clear" class="forgot-password">
          Contraseña olvidada?
        </ion-button>
      </div>

      <!-- Login Button -->
      <ion-button 
        expand="block" 
        type="submit" 
        [disabled]="!loginForm.valid || isLoading"
        class="login-button">
        <ion-spinner name="crescent" *ngIf="isLoading"></ion-spinner>
        <span *ngIf="!isLoading">Iniciar Session</span>
      </ion-button>

      <!-- Error Message -->
      <div class="error-message" *ngIf="errorMessage">
        <ion-icon name="alert-circle"></ion-icon>
        <span>{{ errorMessage }}</span>
      </div>
    </form>



    <!-- Testing Buttons -->
    <div class="testing-buttons">
      <ion-button 
        fill="clear" 
        size="small" 
        color="warning"
        (click)="resetOnboarding()">
        🔄 Ver Onboarding
      </ion-button>
      <ion-button 
        fill="clear" 
        size="small" 
        color="danger"
        (click)="clearAllData()">
        🗑️ Limpiar Todo
      </ion-button>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <p>Cobraya *</p>
  </div>
</ion-content>
